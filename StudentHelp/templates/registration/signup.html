<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup Wizard</title>
    <link href="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/smart_wizard.min.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/smart_wizard_theme_arrows.min.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<body>
       
 <div class="container">
    
     <div class="row d-flex justify-content-center mt-200"> 
         <button type="button" class="btn fancy" data-toggle="modal" data-target="#exampleModal">  <span class="text">Veuillez cliquer ici pour vous inscrire</span> </button> 
     </div>
     <!-- Modal -->
     <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
         <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
             <div class="modal-content">
                 <div class="modal-header">
                     <h5 class="modal-title" id="exampleModalLabel">Signup</h5> 
                     <button type="button" class="close" data-dismiss="modal" aria-label="Close"> 
                         <span aria-hidden="true">&times;</span> 
                     </button>
                 </div>
                 <div class="modal-body">
                     <form id="signupForm" method="POST" enctype="multipart/form-data" action="{% url 'signup' %}">
                         {% csrf_token %}
                         <div id="smartwizard">
                             <ul>
                                 <li><a href="#step-1">Step 1<br /><small>Personal Info</small></a></li>
                                 <li><a href="#step-2">Step 2<br /><small>Account Info</small></a></li>
                                 <li><a href="#step-3">Step 3<br /><small>Upload Image</small></a></li>
                        
                             </ul>
                             <div class="mt-4">
                                 <div id="step-1">
                                     <div class="row">
                                         <div class="col-md-6"> 
                                             <label for="nom">Nom:</label>
                                             <input type="text" class="form-control" id="nom" name="nom" placeholder="Nom" required> 
                                         </div>
                                         <div class="col-md-6"> 
                                             <label for="prenom">Prénom:</label>
                                             <input type="text" class="form-control" id="prenom" name="prenom" placeholder="Prénom" required> 
                                         </div>
                                     </div>
                                     <div class="row mt-3">
                                         <div class="col-md-6"> 
                                             <label for="telephone">Téléphone:</label>
                                             <input type="text" class="form-control" id="telephone" name="telephone" placeholder="Téléphone" required> 
                                         </div>
                                         <div class="col-md-6"> 
                                             <label for="email">Email:</label>
                                             <input type="email" class="form-control" id="email" name="email" placeholder="Email" required> 
                                         </div>
                                     </div>
                                 </div>
                                 <div id="step-2">
                                     <div class="row">
                                         <div class="col-md-6"> 
                                             <label for="password">Mot de passe:</label>
                                             <input type="password" class="form-control" id="password" name="password" placeholder="Mot de passe" required> 
                                         </div>
                                         <div class="col-md-6"> 
                                             <label for="confirm_password">Confirmer mot de passe:</label>
                                             <input type="password" class="form-control" id="confirm_password" name="confirm_password" placeholder="Confirmer mot de passe" required> 
                                         </div>
                                     </div>
                                 </div>
                                 <div id="step-3">
                                     <div class="row">
                                         <div class="col-md-12"> 
                                             <label for="image">Image:</label>
                                             <input type="file" class="form-control" id="image" name="image" required> 
                                         </div>
                                     </div>
                                 </div>
                                
                             </div>
                         </div>
                     </form>
										 <div id="error-alert" class="alert" style="display: none;"></div>

                 </div>
                 <div class="modal-footer">
                     <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                     <button type="button" class="btn btn-secondary" id="submit_btn">Submit</button>
                 </div>
             </div>
         </div>
     </div>
 </div>

 <style>
     body {
        background: url('../../../media/post_images/home_bg.jpg') no-repeat center center fixed;
     }
     .form-control:focus {
         color: #495057;
         background-color: #fff;
         border-color: #80bdff;
         outline: 0;
         box-shadow: 0 0 0 0rem rgba(0,123,255,.25);
     }
     .btn-secondary:focus, .close:focus {
         box-shadow: 0 0 0 0rem rgba(108,117,125,.5);
     }
     .mt-200 {
         margin-top: 200px;
     }
		 .fancy {
			background-color: transparent;
			border: 2px solid #000;
			border-radius: 0;
			box-sizing: border-box;
			color: #fff;
			cursor: pointer;
			display: inline-block;
			float: right;
			font-weight: 700;
			letter-spacing: 0.05em;
			margin: 0;
			outline: none;
			overflow: visible;
			padding: 1.25em 2em;
			position: relative;
			text-align: center;
			text-decoration: none;
			text-transform: none;
			transition: all 0.3s ease-in-out;
			user-select: none;
			font-size: 13px;
		 }
		 
		 .fancy::before {
			content: " ";
			width: 1.5625rem;
			height: 2px;
			background: black;
			top: 50%;
			left: 1.5em;
			position: absolute;
			transform: translateY(-50%);
			transform-origin: center;
			transition: background 0.3s linear, width 0.3s linear;
		 }
		 
		 .fancy .text {
			font-size: 1.125em;
			line-height: 1.33333em;
			padding-left: 2em;
			display: block;
			text-align: left;
			transition: all 0.3s ease-in-out;
			text-transform: uppercase;
			text-decoration: none;
			color: black;
		 }
		 
		 .fancy .top-key {
			height: 2px;
			width: 1.5625rem;
			top: -2px;
			left: 0.625rem;
			position: absolute;
			background: #e8e8e8;
			transition: width 0.5s ease-out, left 0.3s ease-out;
		 }
		 
		 .fancy .bottom-key-1 {
			height: 2px;
			width: 1.5625rem;
			right: 1.875rem;
			bottom: -2px;
			position: absolute;
			background: #e8e8e8;
			transition: width 0.5s ease-out, right 0.3s ease-out;
		 }
		 
		 .fancy .bottom-key-2 {
			height: 2px;
			width: 0.625rem;
			right: 0.625rem;
			bottom: -2px;
			position: absolute;
			background: #e8e8e8;
			transition: width 0.5s ease-out, right 0.3s ease-out;
		 }
		 
		 .fancy:hover {
			color: white;
			background: black;
		 }
		 
		 .fancy:hover::before {
			width: 0.9375rem;
			background: white;
		 }
		 
		 .fancy:hover .text {
			color: white;
			padding-left: 1.5em;
		 }
		 
		 .fancy:hover .top-key {
			left: -2px;
			width: 0px;
		 }
		 
		 .fancy:hover .bottom-key-1,
			.fancy:hover .bottom-key-2 {
			right: 0;
			width: 0;
		 }
 </style>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
 <script src="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/jquery.smartWizard.min.js"></script>
 <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
 <script>
     $(document).ready(function() {
         $('#smartwizard').smartWizard({
             selected: 0,
             theme: 'arrows',
             autoAdjustHeight: true,
             transitionEffect: 'fade',
             showStepURLhash: false,
         });

         $('#smartwizard').on("leaveStep", function(e, anchorObject, stepNumber, stepDirection) {
             var step = stepNumber + 1;
             if (step == 4) {
                 $('#confirm_nom').text($('#nom').val());
                 $('#confirm_prenom').text($('#prenom').val());
                 $('#confirm_telephone').text($('#telephone').val());
                 $('#confirm_email').text($('#email').val());
                 $('#confirm_image').text($('#image').val());
             }
             return true;
         });

         $('#submit_btn').click(function() {
             var form = $('#signupForm')[0];
             var formData = new FormData(form);
             
             $.ajax({
                 type: 'POST',
                 url: $('#signupForm').attr('action'),
                 data: formData,
                 processData: false,
                 contentType: false,
                 success: function(response) {
                     window.location.href = "{% url 'home' %}";
                 },
								 error: function(error) {
									var errorMessage = "An error occurred while processing your request. Please try again later.";
									// Check if the error response contains a specific message
									if (error.responseJSON && error.responseJSON.message) {
											errorMessage = error.responseJSON.message;
									}
									// Display the error message in a red alert box
									$('#error-alert').html(errorMessage).addClass('alert alert-danger').show();
							}
							
							
             });
         });
     });
 </script>
</body>
</html>
